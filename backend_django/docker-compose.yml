# 기존 Docker 컨테이너 사용을 위한 설정
# PostgreSQL: why-up-postgres-1 (포트 5432)
# Redis: econo-redis (포트 6379)

# 새로운 컨테이너가 필요한 경우 아래 주석을 해제하세요
# version: '3.8'

# services:
#   postgres:
#     image: postgres:15
#     container_name: whyup_postgres_new
#     environment:
#       POSTGRES_DB: whyup_db
#       POSTGRES_USER: postgres
#       POSTGRES_PASSWORD: password
#     ports:
#       - "5433:5432"  # 다른 포트 사용
#     volumes:
#       - postgres_data:/var/lib/postgresql/data
#     networks:
#       - whyup_network

#   redis:
#     image: redis:7-alpine
#     container_name: whyup_redis_new
#     ports:
#       - "6380:6379"  # 다른 포트 사용
#     volumes:
#       - redis_data:/data
#     networks:
#       - whyup_network

  # Django 개발 서버 (선택사항)
  django:
    build: .
    container_name: whyup_django
    command: python manage.py runserver 0.0.0.0:8000
    ports:
      - "8000:8000"
    volumes:
      - .:/app
    environment:
      - DEBUG=True
      - DB_HOST=postgres
      - DB_NAME=postgres
      - DB_USER=postgres
      - DB_PASSWORD=password
      - REDIS_URL=redis://redis:6379/0
    depends_on:
      - postgres
      - redis
    networks:
      - whyup_network

volumes:
  postgres_data:
  redis_data:

networks:
  whyup_network:
    driver: bridge
